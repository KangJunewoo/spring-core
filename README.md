# spring-core
김영한님의 스프링 핵심 원리 기본편 강의

## 스프링의 핵심 개념, 컨셉
스프링 == OOP 개발을 도와주는 프레임워크.
- 다형성 : 갈아끼우기 쉬운 OOP의 궁극기
  - 운전자 <-> 자동차(k3, 아반떼, 테슬라)
  - 운전자 <-> k3, 운전자 <-> 아반떼, 운전자 <-> 테슬라가 아님에 유의.
  - 클라에 영향을 주지 않고 새로운 기능을 추가할 수 있음.
  - 로미오(장동건, 원빈) <-> 줄리엣(김태희, 송혜교) 공연도 마찬가지.
  - 역할과 구현으로 구분한 것이 핵심.
    - 클라는 인터페이스만 알면 됨.
    - 클라는 내부 구조를 몰라도 됨.
    - 클라는 내부 구조가 바뀌어도 영향을 받지 않음
    - 클라는 구현체가 변경체가 변경되어도 영향을 받지 않음.
    - 역할은 인터페이스요 구현은 클래스이다
    - 인터페이스가 깨지면 다 끝나긴 함.
      - 그래서 역할(인터페이스)을 매우매우 잘 설계해야 한다.
    - 스프링에서 제공하는 IoC, DI는 다형성을 극대화해주는 수단.
- SOLID
  - S : 단일 책임 원칙
    - 한 클래스는 하나의 책임만. 
    - "변경ㅇ ㅣ있ㅇㄹ 때 파급효과가 적어야 한다ㅣ."
  - O : 개방폐쇄 원칙 (**중요**)
    - 확장엔 열려있지만 변경엔 닫혀있기
    - 근데 확장하려면 변경할수밖에 없는데??? (이해 안되는게 정상)
    - mr = memoryMR() 혹은 r = jdbcMR()
    - 객체를 생성하고 연관관계를 맺어주는 별도의 조립, 설정자가 필요함.
    - 추후 예제에서 다룬다고 함.
  - L : 리스코프 치환 원칙
    - 엑셀을 밟았는데 뒤로 가면 LSP를 위반한거임.
  - I : 인터페이스 분리 원칙
    - 인터페 여러개가 범용인터페 하나보다 낫다.
    - 덩어리를 쪼갠다는 뜻으로 받아들이자.
  - D : 의존관계 역전 원칙 (**중요**)
    - 추상화에 의존해야지, 구체화에 의존하면 안된다.
    - 구현체 대신 인터페이스를 바라보도록 하라.
    - 다만 아까 설명했던 `MemberRepository memberRepository = new JdbcMemberRepository();`와 같은 식으로, 클래스는 리포지토리뿐만 아니라 구현체까지 알고 있어야 하는 상태임.
    - 이는 DIP를 위반한다고 볼 수 있음.
    - 아니 그러면 구현체 없이 어케 하라는거임?? => 뭔가 더 필요하고, 이를 알아볼 것이다.

### 결론
- 모든 설계에 역할과 구현을 분리하자
- 자동차와 로미오와줄리엣 떠올리면 됨.
- 이상적으로는 : 모든 설계에 인터페이스를 부여하자.
  - 다만 무분별하게 도입하면, 추상화 비용이 꽤 많이 발생함.

## 비즈니스 요구사항
### 회원
- 회원가입, 회원조회 구현
- 회원등급 : 일반 or VIP
- 회원 DB 아직 미정
### 주문 & 할인
- 회원은 상품 주문 가능.
- 상품 주문시 회원 등급에 따른 할인 적용
- 일단은 1000원 고정할인이지만, 정률할인 혹은 할인X로 바뀔수도 있음.

초반엔 스프링 하나도 안 쓰고 순수 자바로 갈 것.

## 어떻게 SOLID가 적용되었는가?
- SRP : 구현 객체를 생성하고 연결하는 책임은 AppConfig가 담당하도록 넘겼고 실행하는 책임만 담당함.
- DIP : 주석 길게 달았던 부분. ServiceImpl에서 FixDiscountPolicy가 이젠 나오지 않는다.
- OCP : AppConfig만 바꾸면 설정이 변함. ServiceImpl 바꿀 필요 없음. 

## 스프링
- ApplicationContext(이하 ac)를 스프링 컨테이너라고 함.
- 기존엔 AppConfig를 사용해 직접 객체생섣 + DI를 했지만, 이젠 그럴 필요가 없음.
- `@Configuration`이 붙은 클래스를 설정정보로 사용하고, 그 안에 `@Bean`이 붙어있는 것을 모두 등록한다.
- 이젠 AppConfig를 직접 호출할 필요 없이, `ac.getBean()`으로 모두 가져올 수 있다.
- 근데 기존 코드가 더 심플한거 아닌가? 무슨 장점이 있지? => 어마어마한 장점이 있음.

### 스프링 컨테이너 생성
- 정확히 말하면 스프링 컨테이너는 BeanFactory, ApplicationContext로 구분되나 대부분 ApplicationContext를 의미함.
- 